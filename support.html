<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="icon" href="/favicon.png">
  <link rel="stylesheet" href="/css/styles.css">
  <title>Support â€“ Silky Road</title>
</head>

<body>

  <!-- DYNAMIC HEADER (must exist!) -->
  <div id="header-root"></div>

  <main class="page auth-page">

    <div class="auth-card">

      <h1>Support</h1>
      <p class="muted">We're here to help. Describe your issue below.</p>

      <!-- CONTACT SUPPORT BUTTON -->
      <button id="support-toggle" class="btn btn-primary btn-full" style="margin-top:18px;">
        Contact support
      </button>

      <!-- PANEL: HIDDEN UNTIL CLICKED -->
      <form id="support-panel" class="support-panel">

        <h2 style="margin-top:0;">How can we help you today?</h2>

        <!-- Web3Forms required field -->
        <input type="hidden" name="access_key" value="561267cf-451d-4159-b0ec-6ab62a636953">

        <div class="field">
          <span>Your email address</span>
          <input name="email" id="support-email" type="email" autocomplete="email" required>
        </div>

        <div class="field">
          <span>Subject</span>
          <input name="subject" id="support-subject" type="text" required>
        </div>

        <div class="field">
          <span>Tell us about your issue or question...</span>
          <textarea name="message" id="support-message" rows="5" required></textarea>
        </div>

        <button type="submit" class="btn btn-ghost btn-full">Send message</button>

      </form>

    </div>

  </main>

  <!-- Dynamic Footer -->
  <div id="footer-root"></div>

  <!-- Load header/footer scripts -->
  <script type="module" src="/js/header-main.js"></script>
  <script type="module" src="/js/footer.js"></script>

  <!-- TOGGLE PANEL -->
  <script>
    document.getElementById("support-toggle").addEventListener("click", () => {
      document.getElementById("support-panel").classList.toggle("open");
    });
  </script>

  <!-- WEB3FORMS SUBMISSION -->
  <script>
    const supportForm = document.getElementById("support-panel");

    supportForm.addEventListener("submit", async function (e) {
      e.preventDefault();

      const formData = new FormData(supportForm);

      const response = await fetch("https://api.web3forms.com/submit", {
        method: "POST",
        body: formData
      });

      const result = await response.json();

      if (result.success) {
        alert("Your message has been sent successfully!");
        supportForm.reset();
        supportForm.classList.remove("open");
      } else {
        alert("Failed to send message. Please try again later.");
        console.error(result);
      }
    });
  </script>

</body>
</html>
